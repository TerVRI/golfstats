module.exports=[18108,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(92552),e=a.i(39524),f=a.i(28503),g=a.i(47885),h=a.i(51444),i=a.i(67699);let j={0:{conditions:"Clear sky",icon:"â˜€ï¸"},1:{conditions:"Mainly clear",icon:"ðŸŒ¤ï¸"},2:{conditions:"Partly cloudy",icon:"â›…"},3:{conditions:"Overcast",icon:"â˜ï¸"},45:{conditions:"Foggy",icon:"ðŸŒ«ï¸"},48:{conditions:"Depositing rime fog",icon:"ðŸŒ«ï¸"},51:{conditions:"Light drizzle",icon:"ðŸŒ§ï¸"},53:{conditions:"Moderate drizzle",icon:"ðŸŒ§ï¸"},55:{conditions:"Dense drizzle",icon:"ðŸŒ§ï¸"},61:{conditions:"Slight rain",icon:"ðŸŒ§ï¸"},63:{conditions:"Moderate rain",icon:"ðŸŒ§ï¸"},65:{conditions:"Heavy rain",icon:"ðŸŒ§ï¸"},71:{conditions:"Slight snow",icon:"ðŸŒ¨ï¸"},73:{conditions:"Moderate snow",icon:"ðŸŒ¨ï¸"},75:{conditions:"Heavy snow",icon:"â„ï¸"},77:{conditions:"Snow grains",icon:"ðŸŒ¨ï¸"},80:{conditions:"Slight rain showers",icon:"ðŸŒ¦ï¸"},81:{conditions:"Moderate rain showers",icon:"ðŸŒ¦ï¸"},82:{conditions:"Violent rain showers",icon:"â›ˆï¸"},85:{conditions:"Slight snow showers",icon:"ðŸŒ¨ï¸"},86:{conditions:"Heavy snow showers",icon:"â„ï¸"},95:{conditions:"Thunderstorm",icon:"â›ˆï¸"},96:{conditions:"Thunderstorm with hail",icon:"â›ˆï¸"},99:{conditions:"Severe thunderstorm",icon:"â›ˆï¸"}};function k(a){return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(a/22.5)%16]}function l(a){return Math.round(9*a/5+32)}function m(a){return Math.round(.621371*a)}function n(a,b,c){return a>=50&&a<=95&&b<=20&&c<40}async function o(a,b){try{let c=new URL("https://api.open-meteo.com/v1/forecast");c.searchParams.set("latitude",a.toString()),c.searchParams.set("longitude",b.toString()),c.searchParams.set("current","temperature_2m,relative_humidity_2m,precipitation,weather_code,wind_speed_10m,wind_direction_10m,uv_index"),c.searchParams.set("hourly","temperature_2m,precipitation_probability,weather_code,wind_speed_10m,wind_direction_10m"),c.searchParams.set("daily","temperature_2m_max,temperature_2m_min,precipitation_probability_max,weather_code"),c.searchParams.set("temperature_unit","celsius"),c.searchParams.set("wind_speed_unit","kmh"),c.searchParams.set("timezone","auto"),c.searchParams.set("forecast_days","5");let d=await fetch(c.toString());if(!d.ok)throw Error("Weather fetch failed");let e=await d.json(),f=j[e.current.weather_code]||{conditions:"Unknown",icon:"â“"},g=l(e.current.temperature_2m),h=m(e.current.wind_speed_10m),i=e.hourly.precipitation_probability[0]||0,o={temperature:g,windSpeed:h,windDirection:e.current.wind_direction_10m,windDirectionLabel:k(e.current.wind_direction_10m),precipitation:e.current.precipitation,precipitationProbability:i,humidity:e.current.relative_humidity_2m,uvIndex:e.current.uv_index,conditions:f.conditions,icon:f.icon,isGoodForGolf:n(g,h,i)},p=e.hourly.time.slice(0,12).map((a,b)=>{let c=j[e.hourly.weather_code[b]]||{conditions:"Unknown",icon:"â“"},d=l(e.hourly.temperature_2m[b]),f=m(e.hourly.wind_speed_10m[b]),g=e.hourly.precipitation_probability[b];return{time:new Date(a).toLocaleTimeString("en-US",{hour:"numeric"}),temperature:d,windSpeed:f,windDirection:e.hourly.wind_direction_10m[b],windDirectionLabel:k(e.hourly.wind_direction_10m[b]),precipitation:0,precipitationProbability:g,humidity:0,uvIndex:0,conditions:c.conditions,icon:c.icon,isGoodForGolf:n(d,f,g)}}),q=e.daily.time.map((a,b)=>{let c=j[e.daily.weather_code[b]]||{conditions:"Unknown",icon:"â“"};return{date:new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),tempHigh:l(e.daily.temperature_2m_max[b]),tempLow:l(e.daily.temperature_2m_min[b]),conditions:c.conditions,icon:c.icon,precipitationProbability:e.daily.precipitation_probability_max[b]}});return{current:o,hourly:p,daily:q}}catch(a){return console.error("Weather fetch error:",a),null}}var p=a.i(24987),q=a.i(21374),r=a.i(70106);let s=(0,r.default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]),t=(0,r.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),u=(0,r.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),v=(0,r.default)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),w=(0,r.default)("droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var x=a.i(65341);let y=(0,r.default)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);var z=a.i(13749),A=a.i(96221);let B=(0,r.default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var C=a.i(38246);function D({params:a}){let{id:j}=(0,c.use)(a),k=(0,h.createClient)(),{user:l}=(0,i.useUser)(),[m,n]=(0,c.useState)(null),[r,D]=(0,c.useState)([]),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)({rating:5,title:"",review_text:"",conditions_rating:4,pace_rating:4,value_rating:4,difficulty:"moderate"}),M=(0,c.useCallback)(async()=>{try{let{data:a,error:b}=await k.from("courses").select("*").eq("id",j).single();if(b)throw b;if(n(a),a.latitude&&a.longitude){let b=await o(a.latitude,a.longitude);F(b)}}catch(a){console.error("Error fetching course:",a)}},[k,j]),N=(0,c.useCallback)(async()=>{try{let{data:a,error:b}=await k.from("course_reviews").select("*, profiles(full_name, avatar_url)").eq("course_id",j).order("created_at",{ascending:!1});if(b)throw b;D(a||[])}catch(a){console.error("Error fetching reviews:",a)}finally{H(!1)}},[k,j]);(0,c.useEffect)(()=>{M(),N()},[M,N]);let O=async()=>{if(l&&m){J(!0);try{let{error:a}=await k.from("course_reviews").upsert({course_id:m.id,user_id:l.id,rating:K.rating,title:K.title||null,review_text:K.review_text||null,conditions_rating:K.conditions_rating,pace_rating:K.pace_rating,value_rating:K.value_rating,difficulty:K.difficulty,would_recommend:K.rating>=3,played_at:new Date().toISOString().split("T")[0]});if(a)throw a;L({rating:5,title:"",review_text:"",conditions_rating:4,pace_rating:4,value_rating:4,difficulty:"moderate"}),N(),M()}catch(a){console.error("Error submitting review:",a)}finally{J(!1)}}},P=(a,c=!1,d)=>(0,b.jsx)("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(e=>(0,b.jsx)("button",{type:"button",disabled:!c,onClick:()=>d?.(e),className:c?"cursor-pointer hover:scale-110 transition-transform":"",children:(0,b.jsx)(q.Star,{className:`w-5 h-5 ${e<=a?"fill-accent-amber text-accent-amber":"text-background-tertiary"}`})},e))});return G||!m?(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)(A.Loader2,{className:"w-8 h-8 animate-spin text-accent-green"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(C.default,{href:"/courses",className:"inline-flex items-center text-foreground-muted hover:text-foreground transition-colors",children:[(0,b.jsx)(z.ChevronLeft,{className:"w-4 h-4"}),"Back to Courses"]}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,b.jsxs)(d.Card,{className:"flex-1 p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:m.name}),(m.city||m.state)&&(0,b.jsxs)("p",{className:"text-foreground-muted flex items-center gap-1 mt-1",children:[(0,b.jsx)(p.MapPin,{className:"w-4 h-4"}),[m.city,m.state,m.country].filter(Boolean).join(", ")]})]}),(0,b.jsxs)("div",{className:"text-right",children:[P(m.avg_rating||0),(0,b.jsxs)("p",{className:"text-sm text-foreground-muted mt-1",children:[m.review_count," reviews"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[(0,b.jsxs)("div",{className:"text-center p-3 bg-background-secondary rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:m.par}),(0,b.jsx)("div",{className:"text-sm text-foreground-muted",children:"Par"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-background-secondary rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:m.course_rating}),(0,b.jsx)("div",{className:"text-sm text-foreground-muted",children:"Rating"})]}),(0,b.jsxs)("div",{className:"text-center p-3 bg-background-secondary rounded-lg",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-foreground",children:m.slope_rating}),(0,b.jsx)("div",{className:"text-sm text-foreground-muted",children:"Slope"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 mt-6 flex-wrap",children:[m.phone&&(0,b.jsxs)("a",{href:`tel:${m.phone}`,className:"flex items-center gap-2 text-foreground-muted hover:text-foreground",children:[(0,b.jsx)(t,{className:"w-4 h-4"}),m.phone]}),m.website&&(0,b.jsxs)("a",{href:m.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-foreground-muted hover:text-foreground",children:[(0,b.jsx)(u,{className:"w-4 h-4"}),"Website"]})]})]}),E&&(0,b.jsxs)(d.Card,{className:"lg:w-80 p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Current Weather"}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:"text-4xl",children:E.current.icon}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-3xl font-bold text-foreground",children:[E.current.temperature,"Â°F"]}),(0,b.jsx)("div",{className:"text-foreground-muted text-sm",children:E.current.conditions})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(v,{className:"w-4 h-4 text-foreground-muted"}),(0,b.jsxs)("span",{className:"text-foreground",children:[E.current.windSpeed," mph ",E.current.windDirectionLabel]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(w,{className:"w-4 h-4 text-foreground-muted"}),(0,b.jsxs)("span",{className:"text-foreground",children:[E.current.humidity,"%"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(y,{className:"w-4 h-4 text-foreground-muted"}),(0,b.jsxs)("span",{className:"text-foreground",children:[E.current.precipitationProbability,"% rain"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(x.Sun,{className:"w-4 h-4 text-foreground-muted"}),(0,b.jsxs)("span",{className:"text-foreground",children:["UV ",E.current.uvIndex]})]})]}),(0,b.jsx)("div",{className:`mt-4 p-2 rounded text-center text-sm font-medium ${E.current.isGoodForGolf?"bg-accent-green/20 text-accent-green":"bg-accent-amber/20 text-accent-amber"}`,children:E.current.isGoodForGolf?"â˜€ï¸ Great day for golf!":"âš ï¸ Check conditions"})]})]}),l&&(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Write a Review"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-foreground-muted",children:"Overall Rating:"}),P(K.rating,!0,a=>L(b=>({...b,rating:a})))]}),(0,b.jsx)(f.Input,{placeholder:"Review title (optional)",value:K.title,onChange:a=>L(b=>({...b,title:a.target.value}))}),(0,b.jsx)("textarea",{className:"w-full p-3 bg-background-secondary border border-background-tertiary rounded-xl text-foreground placeholder-foreground-muted resize-none",rows:4,placeholder:"Share your experience...",value:K.review_text,onChange:a=>L(b=>({...b,review_text:a.target.value}))}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-foreground-muted",children:"Conditions"}),P(K.conditions_rating,!0,a=>L(b=>({...b,conditions_rating:a})))]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-foreground-muted",children:"Pace of Play"}),P(K.pace_rating,!0,a=>L(b=>({...b,pace_rating:a})))]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-foreground-muted",children:"Value"}),P(K.value_rating,!0,a=>L(b=>({...b,value_rating:a})))]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm text-foreground-muted",children:"Difficulty"}),(0,b.jsx)(g.Select,{value:K.difficulty,onChange:a=>L(b=>({...b,difficulty:a.target.value})),options:[{value:"easy",label:"Easy"},{value:"moderate",label:"Moderate"},{value:"difficult",label:"Difficult"},{value:"very_difficult",label:"Very Difficult"}]})]})]}),(0,b.jsxs)(e.Button,{onClick:O,disabled:I,className:"flex items-center gap-2",children:[I?(0,b.jsx)(A.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(B,{className:"w-4 h-4"}),"Submit Review"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"font-semibold text-foreground text-lg mb-4",children:["Reviews (",r.length,")"]}),0===r.length?(0,b.jsx)(d.Card,{className:"p-8 text-center",children:(0,b.jsx)("p",{className:"text-foreground-muted",children:"No reviews yet. Be the first to review!"})}):(0,b.jsx)("div",{className:"space-y-4",children:r.map(a=>(0,b.jsxs)(d.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-foreground",children:a.profiles?.full_name||"Anonymous Golfer"}),(0,b.jsx)("div",{className:"text-sm text-foreground-muted",children:new Date(a.created_at).toLocaleDateString()})]}),P(a.rating)]}),a.title&&(0,b.jsx)("h4",{className:"font-semibold text-foreground mb-2",children:a.title}),a.review_text&&(0,b.jsx)("p",{className:"text-foreground-muted mb-4",children:a.review_text}),(0,b.jsxs)("div",{className:"flex gap-4 text-sm",children:[a.conditions_rating&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"text-foreground-muted",children:"Conditions:"}),P(a.conditions_rating)]}),a.difficulty&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-foreground-muted",children:"Difficulty:"}),(0,b.jsx)("span",{className:"ml-1 text-foreground capitalize",children:a.difficulty.replace("_"," ")})]})]}),a.would_recommend&&(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-1 text-accent-green text-sm",children:[(0,b.jsx)(s,{className:"w-4 h-4"}),"Would recommend"]})]},a.id))})]})]})}a.s(["default",()=>D],18108)}];

//# sourceMappingURL=apps_web_src_app_%28app%29_courses_%5Bid%5D_page_tsx_a599a9e5._.js.map